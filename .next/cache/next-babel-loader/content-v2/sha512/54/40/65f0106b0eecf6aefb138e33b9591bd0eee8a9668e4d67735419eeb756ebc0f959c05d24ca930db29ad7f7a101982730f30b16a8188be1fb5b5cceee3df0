{"ast":null,"code":"import prisma from '../../../lib/prisma';\nimport { getSession } from 'next-auth/client'; // POST /api/post\n// Required fields in body: title\n// Optional fields in body: content\n\nexport default async function handle(req, res) {\n  var _session$user;\n\n  const {\n    title,\n    content\n  } = req.body;\n  console.log(title);\n  console.log(content);\n  const session = await getSession({\n    req\n  });\n  const result = await prisma.post.create({\n    data: {\n      title: title,\n      content: content,\n      author: {\n        connect: {\n          email: session === null || session === void 0 ? void 0 : (_session$user = session.user) === null || _session$user === void 0 ? void 0 : _session$user.email\n        }\n      }\n    }\n  });\n  res.json(result);\n}","map":{"version":3,"sources":["/Users/raphael/Downloads/github/prisma-examples-latest/typescript/rest-nextjs-api-routes-auth/pages/api/post/index.ts"],"names":["prisma","getSession","handle","req","res","title","content","body","console","log","session","result","post","create","data","author","connect","email","user","json"],"mappings":"AACA,OAAOA,MAAP,MAAmB,qBAAnB;AACA,SAASC,UAAT,QAA2B,kBAA3B,C,CAGA;AACA;AACA;;AACA,eAAe,eAAeC,MAAf,CAAsBC,GAAtB,EAA2CC,GAA3C,EAAiE;AAAA;;AAC9E,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAqBH,GAAG,CAACI,IAA/B;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AAGA,QAAMI,OAAO,GAAG,MAAMT,UAAU,CAAC;AAAEE,IAAAA;AAAF,GAAD,CAAhC;AACA,QAAMQ,MAAM,GAAG,MAAMX,MAAM,CAACY,IAAP,CAAYC,MAAZ,CAAmB;AACtCC,IAAAA,IAAI,EAAE;AACJT,MAAAA,KAAK,EAAEA,KADH;AAEJC,MAAAA,OAAO,EAAEA,OAFL;AAGJS,MAAAA,MAAM,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,KAAK,EAAEP,OAAF,aAAEA,OAAF,wCAAEA,OAAO,CAAEQ,IAAX,kDAAE,cAAeD;AAAxB;AAAX;AAHJ;AADgC,GAAnB,CAArB;AAOAb,EAAAA,GAAG,CAACe,IAAJ,CAASR,MAAT;AACD","sourcesContent":["import type { NextApiRequest, NextApiResponse } from 'next'\nimport prisma from '../../../lib/prisma'\nimport { getSession } from 'next-auth/client'\n\n\n// POST /api/post\n// Required fields in body: title\n// Optional fields in body: content\nexport default async function handle(req: NextApiRequest, res: NextApiResponse) {\n  const { title, content } = req.body;\n\n  console.log(title);\n  console.log(content);\n\n\n  const session = await getSession({ req });\n  const result = await prisma.post.create({\n    data: {\n      title: title,\n      content: content,\n      author: { connect: { email: session?.user?.email } },\n    },\n  });\n  res.json(result);\n}\n"]},"metadata":{},"sourceType":"module"}